---
import Footer from '@/components/Footer.astro'
import Navbar from '@/components/Navbar.tsx'
import AboutMe from '@/components/AboutMe.tsx'
import WorkExperience from '@/components/WorkExperience.tsx'
import '@/styles/globals.css'
import Layout from '../layouts/Layout.astro'
import { ModeToggle } from '@/components/ModeToggle'
---

<script is:inline>
	const getThemePreference = () => {
		if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
			return localStorage.getItem('theme')
		}
		return window.matchMedia('(prefers-color-scheme: dark)').matches ?
				'dark'
			:	'light'
	}
	const isDark = getThemePreference() === 'dark'
	document.documentElement.classList[isDark ? 'add' : 'remove']('dark')

	if (typeof localStorage !== 'undefined') {
		const observer = new MutationObserver(() => {
			const isDark = document.documentElement.classList.contains('dark')
			localStorage.setItem('theme', isDark ? 'dark' : 'light')
		})
		observer.observe(document.documentElement, {
			attributes: true,
			attributeFilter: ['class']
		})
	}
</script>

<Layout title='Welcome to Astro.'>
	<div class='flex justify-between items-center px-8 pt-4 h-8'>
		<Navbar client:only='react' />
		<ModeToggle client:only='react' />
	</div>

	<main class='px-8 md:px-40 lg:px-64 2xl:px-96'>
		<AboutMe client:only='react' />
		<WorkExperience client:only='react' />
		<h1>Welcome to <span class='text-gradient'>Astro</span></h1>
	</main>
	<Footer />
</Layout>
